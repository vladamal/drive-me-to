
(function(){

    'use strict';

    angular.module('driving-routes', [
        'ui.router',
        'LocalStorageModule'
    ]);

}());


(function () {

    'use strict';

    angular.module('driving-routes').config(config);

    config.$inject = ['localStorageServiceProvider'];

    function config(localStorageServiceProvider){

        localStorageServiceProvider
            .setPrefix('driving');

    }

}());

(function() {

    'use strict';

    angular.module("driving-routes")
        .config(["$stateProvider", "$urlRouterProvider",
            function ($stateProvider, $urlRouterProvider) {

                $stateProvider

                    .state('routes', {
                        url:'/',
                        templateUrl: 'routes/routesView.html',
                        controller: 'routesController',
                        controllerAs: 'vm'
                    });

                $urlRouterProvider.otherwise('/');

            }
        ]);
}());
(function() {

    'use strict';

    angular.module('driving-routes').controller("routesController", routesController);

    routesController.$inject = ['routesService'];

    function routesController(routesService) {

        var vm = this;

        vm.newRoute = {};
        vm.routes = [];

        init();
        function init(){
            vm.routes = routesService.getRoutes();
            if (vm.routes == null) {
                vm.routes = [];
            }
        }

        vm.addRoute = function(route){
            vm.routes.push(route);
            vm.newRoute = {};
            routesService.updateRoutes(vm.routes);
        };

        vm.removeRoute = function(idx){
            vm.routes.splice(idx, 1);
            routesService.updateRoutes(vm.routes);
        };

    }

}());


(function(){

    'use strict';

    angular.module('driving-routes').factory( 'routesService', routesService );

    routesService.$inject = ['localStorageService'];

    function routesService(localStorageService){

        return {
            getRoutes    : getRoutes,
            updateRoutes : updateRoutes
        };

        function getRoutes() {
            return localStorageService.get('routes');
        }

        function updateRoutes(routes) {
            return localStorageService.set('routes', routes);
        }

    }
}());